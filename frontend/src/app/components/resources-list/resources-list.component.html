<div class="rounded-2xl bg-bg-alt p-3">
  <!-- Header-rad med typväljare -->
  <div
    class="mb-3 flex items-center gap-2 bg-bg rounded-md px-3 py-2 text-[#993f3b] border border-border"
  >
    <span class="material-symbols-rounded text-[#993f3b] opacity-70"
      >category</span
    >
    <label class="text-sm text-heading sr-only">Resurstyp</label>
    <select
      class="flex-1 outline-none text-sm placeholder:text-[#993f3b] opacity-80"
      [ngModel]="selectedTypeId"
      (ngModelChange)="typeChange.emit($event)"
    >
      <option *ngFor="let t of types" [ngValue]="t.id">{{ t.name }}</option>
    </select>
  </div>

  <!-- Loading -->
  <div *ngIf="loading" class="text-sm text-heading/70 p-2">
    <span class="material-symbols-rounded text-[#993f3b] opacity-70 spin-slow"
      >autorenew</span
    >
    <span class="m-3 text-lg leading-1 text-[#993f3b] opacity-70"
      >Laddar...</span
    >
  </div>
  <div *ngIf="error" class="text-sm text-error p-2">{{ error }}</div>

  <!-- Lista -->
  <ul
    class="divide-y divide-border rounded-xl overflow-hidden bg-bg border border-border"
  >
    <li
      *ngFor="let r of resources"
      class="flex items-center justify-between px-4 py-3 gap-y-3 gap-x-2 flex-wrap"
      [ngClass]="{
        'bg-primary text-white rounded-md shadow-sm': r.id === selectedTypeId,
        'hover:bg-bg-alt': r.id !== selectedTypeId
      }"
    >
      <div>
        <div class="font-medium text-heading">{{ r.name }}</div>
        <div class="text-xs opacity-70 text-[#993f3b]">
          Typ: {{ r.resourceTypeName || "#" + r.resourceTypeId }}
        </div>
      </div>

      <div class="flex items-center gap-2">
        <button
          type="button"
          (click)="edit.emit(r)"
          class="text-sm px-3 py-1 rounded-md border border-border bg-transparent text-text hover:bg-bg-alt"
        >
          Redigera
        </button>

        <button
          type="button"
          (click)="remove.emit(r)"
          class="text-sm px-3 py-1 rounded-md bg-primary text-white hover:bg-primary/90"
        >
          Ta bort
        </button>
      </div>
    </li>

    <li
      *ngIf="!loading && !resources?.length"
      class="px-4 py-3 text-sm text-heading/70"
    >
      Inga resurser för vald typ.
    </li>
  </ul>
</div>
